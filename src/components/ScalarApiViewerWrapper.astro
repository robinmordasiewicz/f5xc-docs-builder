---
import ScalarApiViewer from './ScalarApiViewer.tsx';

interface Props {
  specUrl: string;
  title?: string;
}

const { specUrl, title } = Astro.props;

// Prepend Astro base path so runtime fetch() resolves correctly on project sites
const base = import.meta.env.BASE_URL.replace(/\/$/, '');
const resolvedUrl = specUrl.startsWith('/') ? `${base}${specUrl}` : specUrl;
---

<div class="scalar-viewer-container">
  <ScalarApiViewer specUrl={resolvedUrl} title={title} client:only="react" />
</div>

<style is:global>
  .scalar-viewer-container {
    margin-block: 1rem;
    border-radius: 0.5rem;
    overflow: hidden;
    min-height: 600px;
  }
  .scalar-viewer-container .scalar-app {
    max-width: 100%;
  }
</style>
